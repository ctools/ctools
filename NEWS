New Features and Important Changes in ctools 1.6.0

15 June 2018


Introduction
------------
This document briefly summarizes the changes that have been made in this
ctools release with respect to the precedent release.


Configuration
-------------
Keep existing library path in installation script on Mac OS X (#2420)


Python interface
----------------
None


Support model
-------------
None


Base classes
------------
The ctool base class now loads the application parameters from the file provided
in the "syspfiles" folder and updates parameter values using the file found in
the user's "pfiles" folder, so that any change to the parameter file structure
is handled transparently and no longer leads to an exception (#2513).

The ctool::time_reference constant was removed since it is not required
anymore. The time reference is now transparently handled by the tools, and
if there is a choice, a "mjdref" parameter was added to the tools (#2054).

The ctool::create_cta_obs() method now queries the optional "mjdref" parameter
so that a MJD reference time can be specified by the tool. This functionality
is now used by ctobssim (#2054).

The ctools::get_gti() method now takes GTimeReference as argument to enable
tools to retrieve Mission Elapsed Time (MET) in the time reference of the
observation (#2054).

The ctools::is_valid_filename() method was removed since the validity check
of the filename is now done by the GApplicationPar class.


ctbin - CTA event binning
-------------------------
Copy the time reference from the first input observation (#2054).


ctbkgcube - CTA background cube generation
------------------------------------------
None


ctbutterfly - Generate butterfly diagrams
-----------------------------------------
None


ctcubemask - CTA cube filtering
-------------------------------
None


ctedispcube - CTA energy dispersion cube generation
---------------------------------------------------
None


cterror - Likelihood profile error computation
----------------------------------------------
None


ctexpcube - CTA exposure cube generation
----------------------------------------
None


ctlike - Maximum likelihood fitting
-----------------------------------
None


ctmapcube - CTA map cube generation
-----------------------------------
None


ctmodel - CTA counts cube modelling
-----------------------------------
None


ctobssim - CTA observation simulation
-------------------------------------
Add "mjdref" parameter to allow specification of the MJD reference time
for the simulation (#2054).


ctphase - Event phase computation
---------------------------------
None


ctprob - Event probability computation
--------------------------------------
None


ctpsfcube - CTA point spread function cube generation
-----------------------------------------------------
None


ctselect - CTA event selection
------------------------------
Interpret MET specified by "tmin" and "tmax" parameters in the time reference
of the input observations (#2054). 


ctskymap - CTA sky mapping
--------------------------
Add the "inmap", "iterations" and "threshold" parameters. The hidden
"inmap" parameter allows specifying a sky map file containing a "COUNTS"
and "ACCEPTANCE" extension which avoids looping over event lists in an
observation container. The "iterations" parameter allows the iterative
determination of an exclusion map from the resulting significance map for
the RING background method. The exclusion map will flag all pixels with
significances above the "threshold" value so that they will be excluded
in the subsequent RING background determination. Since this will impact
the pixel significances, the procedure needs to be repeated a couple of
times to stabilise (#2311).

Accelerate the IRF and RING background methods. For the RING background
method the computation is either performed using a FFT or using a direct
computation. The FFT computation is faster, but assumed Euclidian
distances for the sky map grid, the direct computation is slower, but
accurately computes the distances between sky map pixels (#2309).


cttsmap - Generation of Test Statistic map
------------------------------------------
None


ctulimit - Compute upper limit
------------------------------
None


support - Support classes
-------------------------
None


cscaldb - Inspect calibration database
--------------------------------------
None


csebins - Generate energy boundaries
------------------------------------
None


csfindobs - Find IACT observations
----------------------------------
None


csiactcopy - Copy IACT observations
-----------------------------------
None


csiactdata - Inspect IACT data store
------------------------------------
None


csiactobs - Inspect IACT observation definition XML file
--------------------------------------------------------
None


cslightcrv - Generate light curve
---------------------------------
Add hidden "mjdref" parameter for the specification of the MET reference
(#2054).


csmodelinfo - Return model information
--------------------------------------
None


csmodelmerge - Merge models
---------------------------
None


csmodelselect - Select models
-----------------------------
None


csmodelsois - Puts selected sources in diffuse model cube
---------------------------------------------------------
None


csobs2caldb - Generate calibration database entry for an IACT observation
-------------------------------------------------------------------------
None


csobsdef - Generate observation definition XML file
---------------------------------------------------
Add hidden "mjdref" parameter for the specification of the MET reference
(#2054).


csobsinfo - Return observation definition information
-----------------------------------------------------
Add ras() and decs() methods (#2313)


csobsselect - Select observations
---------------------------------
Use time reference of input observations if time selection is given in MET
(#2054).


csphagen - Generate On/Off observations
---------------------------------------
The true number of energy bins is now computed using
   int(bins_per_decade * num_of_decades + 0.5)
making sure in addition that the result is at least 1. This provides better
control over the number of energy bins (#2490).

The script now produces data that are compliant with Xspec. An Xspec howto
tutorial was added to the user documentation (#2404).


csphasecrv - Generate phase curve
---------------------------------
None


cspull - Generate pull distributions
------------------------------------
Add hidden "mjdref" parameter for the specification of the MET reference
(#2054).


csresmap - Generate residual map
--------------------------------
None


csresspec - Generate residual spectrum
--------------------------------------
An exception occured when using a pre-computed model cube via the modcube
parameter due to a bug in the code. This bug was fixed (#2448).


csroot2caldb - Generates calibration database from ROOT file
------------------------------------------------------------
None


cssens - Computes sensitivity curve
-----------------------------------
None


csspec - Generates Spectral Energy Distribution
-----------------------------------------------
csspec now properly computes the Test Statistic for an On/Off analysis using
the "wstat" statistic in the case that the input model definition XML file
did not contain a background model (#2312).


cssrcdetect - Detects sources in sky map
----------------------------------------
None


cstsdist - Computes Test Statistic distribution
-----------------------------------------------
None


cstsmapmerge - Merge Test Statistic maps
----------------------------------------
None


cstsmapsplit - Prepare split Test Statistic computation
-------------------------------------------------------
None


csviscube - Generate visibility cube
------------------------------------
Add hidden "mjdref" parameter for the specification of the MET reference
(#2054).


csworkflow - Execute workflow
-----------------------------
None


calutils - Calibration utilities
--------------------------------
None


ioutils - Input/Output utilities
--------------------------------
None


modutils - Model utilities
--------------------------
None


obsutils - Observation utilities
--------------------------------
Add "mjdref" parameter to set_obs() function (#2054).


Examples
--------
Added show_rmf.py script.


caldb
-----
None


models
------
None
